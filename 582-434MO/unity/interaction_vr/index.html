<!DOCTYPE html>
<html lang="fr-ca">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-P2R7T89B4B"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-P2R7T89B4B');
        </script>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="noindex, nofollow" />
        <link rel="icon" type="image/x-icon" href="../../../shared/images/favicon.ico">
        <link rel="stylesheet" href="../../../shared/styles/styles.min.css">
        <link rel="stylesheet" href="../../../shared/styles/highlight.min.css">
        <link rel="stylesheet" href="../../../shared/styles/swiper-bundle.min.css">
        <script src="../../../shared/jscripts/highlight.min.js"></script>
        <script src="../../../shared/jscripts/howler.min.js"></script>
        <script src="../../../shared/jscripts/swiper-bundle.min.js"></script>
        <script src="../../../shared/jscripts/vue.global.prod.js"></script>
        <script src="../../../shared/jscripts/timdoc.min.js"></script>
        <script>const shared = '../../../shared/';</script>
        <title>Interaction en VR</title>
    </head>
    <body>
        <script>document.body.className = localStorage.getItem('darkmode') === 'true' ? 'dark' : 'light';</script>
        <a id="top"></a>
        <header>
            <div id="logo" @click="goToTop('../../', '')" title="Retour à l'accueil">
                <svg class="logo-tim" xmlns="http://www.w3.org/2000/svg" class="logo-tim" viewBox="0 0 953.6 303.8">
                   <path d="m785.7 166.8 16.3 16.3 16.2-16.3L930.6 54.5v226.2h-257v-226l112 112.1zM650.6.8v303h303V.7h-1.8L802 150.4 652 .7h-1.5zM324.5.4v303h303V.5h-303zm130 129.9a33.5 33.5 0 0 0 34.7 55.3l94.8 94.8H347.5v-257h257v236.4l-94.8-94.7a33.5 33.5 0 0 0-55.3-34.8zM206.4 0 0 206.5V303h303V0h-96.5zM23 280v-64l85.6-85.6 119.9 119.8 20.5-20.5L129.1 110 216 23h64v257H23z"/>
                </svg>
            </div>
            <div title="Interrupteur" id="lightswitch" ref="lightswitch" @click="lightswitch()"></div>
        </header>
        <main>
            <!-- MAIN HEADER EOF -->
            <div id="subhead">
                <div id="breadcrumb">
                    <div id="breadcrumb_normal"><a href="../../">Réalité virtuelle</a> > <a href="../">Unity</a> ></div>
                    <div id="breadcrumb_index"></div>
                </div>
                <h1 id="title"><img src="images/icon.png">&nbsp;Interaction en VR</h1>
            </div>
            <article>
                <div id="contents">
                    <!-- ARTICLE HEADER EOF -->

<p class="spacer">Nous allons voir comment prendre et lancer des objets dans Unity.</p>


<dots></dots>

<grostitre>XR grab</grostitre>
<p>En résumé, voici les étapes pour créer un objet interactif:</p>
<checklist>
    Créer un objet, soit avec les objets 3D de Unity ou en important votre modèle. 
    Ajoutez un box collider ou un sphere collider sur votre objet.
    Ajouter la composante XR Grab Interactable sur votre objet.
    S'assurer que Use Gravity est coché sur le Rigidbody de votre objet. 
    Glissez le Interaction Manager de votre joueur dans la boîte Interaction Manager de la composante XR Grab Interactable. 
</checklist>

<p>Sur la composante XR Grab Interactable, il y a en bas complètement une catégorie événement. Lorsque vous l'ouvrez vous pouvez déclencher des éléments précis lorsque votre objet atteint certains stages. Par exemple, si vous prenez votre objet et que vous appuyez sur la gachette, vous pourriez déclencher quelque chose.</p>

<youtube src="KljYJ8an1dU"></youtube>

<dots></dots>

<grostitre>Méthode de sélection</grostitre>
<p>En vr, nous verrons deux méthodes de sélection, le rayon et l'interaction directe. Le rayon nous permet de sélectionner un objet en pointant notre manette vers celui-ci. L'interaction directe pour sa part sélectionne l'objet lorsqu'on le touche ou qu'on entre dans sa zone de collision. Par défaut, vous avez un XR Ray Interactor composante sur vos deux manettes, vous pourrez le désactiver si vous ne voulez pas utiliser cette méthode. Vous pouvez aussi utiliser un mélange des deux méthodes. Pour l'interaction directe, vous devrez vous créer un objet vide comme enfant de votre controlleur et lui donner une composante XR Direct Interactor et un sphere Collider.</p>
<p>Pour utilisez les rayons, il n'y a rien à faire, ils viennent par défaut.</p>
<h3>Utiliser la sélection directe:</h3>
<checklist>
    Créez un objet vide sur un de vos deux controlleurs et nommez-le DirectInteractor.
    Ajouter la composante XR Direct Interactor.
    Ajouter un sphere collider, choisissez sa taille selon la taille que vous voulez pour les mains. (ex: 0.2) Cochez IsTrigger pour que vos mains puissent toucher les objets. 
    Sur les controlleurs, désactivez les composantes Ray Interactor, Line renderer et XR Interactor Line visual si vous ne voulez pas utiliser les rayons. 
</checklist>
<h3>Pour utiliser les rayons pour la téléportation et l'interacteur direct pour les objets:</h3>
<checklist>
    Dans XR Ray Interactor, modifiez le Interaction Layer Mask, dans cette option, cliquez sur Add Layer. Créez un layer avec le nom de votre choix (exemple: Teleport). Choisissez uniquement ce layer comme layer mask de votre interacteur.
    Sur les plateformes ou les zones de téléportation dans la composante Teleport Anchor ou Area, choisissez votre nouveau Layer comme Interaction Layer Mask.
    Dans DirectInteractor, vous devez aller décocher votre nouveau layer dans le paramètre Interaction Layer Mask de la composante XR Direct Interactor.
    Pour permettre au rayon de disparaître quand on est assez proche de l'objet: Ajouter un XR Interaction Group sur le controlleur parent. Cocher la case qui dit que Direct Interactor peut override le rayon. 
</checklist>
<youtube src="O4XpqZM7R0U"></youtube>

<dots></dots>

<grostitre>Movement type</grostitre>
<p> Dans la composante XR Grab Interactable, il y a le paramètre Movement type qu'on peut modifier. Je vous invite à tester les 3 types de mouvements pour voir les différences.</p>
<p><b>Kinematic:</b> Quand on tient un objet kinematic, il peut passer à travers les autres objets sans Rigidbody. Si on pousse un objet avec celui-ci, la physique sera prise en compte.</p>
<p><b>Instantaneous:</b>C'est le mouvement le plus stable. Lorsqu'on tient un objet, il ne bouge pas. Par contre, lorsqu'il touche un autre objet, il ne prends pas les règles de la physique en compte.</p>
<p><b>Velocity tracking:</b>Cet objet pourra entrer en collision avec n'importe quel objet qu'il touche. Ce type de mouvement prend en compte la vitesse de votre main. Ainsi, quand on lache l'objet, on lui induit un mouvement plus réaliste.</p>

<dots></dots>

<grostitre>Choisir le point d'attache de l'objet</grostitre>
<p>Dans certaines situations, vous voudrez attacher votre objet à un point précis de votre main. Par exemple, si vous tenez une raquette, vous voulez la tenir par la poignée. Voici comment choisir votre point d'attache:</p>
<checklist>
    Créez un enfant vide (empty) sur votre objet, vous pouvez le nommer attache. 
    Modifiez la position de cet objet pour qu'il soit au point d'attache de votre objet.
    Sélectionnez ensuite votre objet et trouvez la composante XR Grab Interactable.
    Dans le paramètre Attach transform, glissez l'enfant que vous venez de créer.  
    Faites ensuite Play et regardez le résultat. 
    Il est possible que vous deviez ajuster la rotation de votre enfant pour que votre objet soit tenu dans le bon sens. Vous pouvez aussi donner un léger angle à votre objet puisqu'on tient rarement un objet très droit.
</checklist>

<dots></dots>

<grostitre>Empêcher l'objet de bouger avec le Joystick</grostitre>
<p>Vous avez peut-être remarqué, par défaut, on peut bouger l'objet qu'on tient dans nos mains avec le joystick. Parfois cela peut être intéressant, mais à d'autres moments ce n'est pas ce qu'on souhaite. Pour empêcher cela, on doit aller sur la composante XR Ray Interactor de nos controlleurs et désactiver le paramètre Anchor Control. 


<dots></dots>

<grostitre>Cacher les mains lorsqu'un objet est sélectionné</grostitre>
<p>Peu importe la méthode de sélection (XR Ray Interactor ou XR Direct Interactor), vous avez un bouton que vous pouvez cocher sur leur composante qui est: Hide Controller On Select. Celui-ci permet de cacher vos mains lorsque vous prenez un objet. Cela peut être pratique si vos mains n'ont pas l'air de bien agripper les objets. </p>
<dots></dots>

<grostitre>Déclencher un événement lorsqu'un objet est sélectionné</grostitre>

<p>Peu importe la méthode de sélection (XR Ray Interactor ou XR Direct Interactor), vous avez plusieurs événements en bas de la composante. Par exemple, les audio events vous permettent de jouer un son selon si votre manette touche un objet. Vous pouvez aussi utiliser les haptic events pour faire vibrer les controlleur. Finalement, les interactor events permettent de partir des scripts.</p>

<dots></dots>

<grostitre>Empêcher un objet lancé de passer à travers le sol</grostitre>
<p>Si votre objet passe parfois au travers de certains ojbets alors qu'il ne devrait pas, voici comment régler la situation:</p>
<checklist>
    Trouvez votre objet dans la hiérarchie et dans l'inspecteur, trouvez sa composante Rigidbody.
    Changez le Collision detection Type pour Continuous dynamic. Ainsi, le rigidbody fera toujours effet.
    Assurez-vous que isKinematic n'est pas coché sur votre Rigidbody. 
</checklist>

<dots></dots>

<grostitre>Réduire le tremblement de l'objet dans votre main</grostitre>
<p>Parfois, l'objet dans votre main peut avoir l'air de trembler beaucoup, car il tente de suivre vos mouvements. Voici comment ajuster cela:</p>
<checklist>
    Sur votre objet, trouvez la composante XR Grab Interactable. 
    Dans votre composante, trouvez le paramètre Smooth position et cochez-le. 
    Ajustez ensuite les sliders de Smooth position et tighten position pour diminuer le tremblement.
    Faites le même procédé pour le paramètre Smooth Rotation. 
</checklist>

<dots></dots>

<grostitre>XR socket</grostitre>


<p>Dans Unity, les sockets sont des endroits spécifiques sur lesquels on peut déposer un objet. Vous apprendrez comment les configurer dans les tutoriels suivant:</p>
<checklist>
    Assurez-vous d'avoir un objet qu'on peut prendre et bouger et un objet sur lequel on viendra déposer celui-ci. Pour le socle, on doit avoir un collider et isTrigger doit être coché.
    Sur le socle, on ajoute la composante XR Socket Interactor.
    Dans le paramètre Interaction Manager on glisse notre XR Interaction Manager. 
    Créer un objet vide comme enfant de votre socle. Positionnez celui-ci à l'endroit sur lequel vous allez déposer l'autre objet. 
    Dans le XR SOxket Interactor, glissez cet objet dans Attach transform. 
    Testez, puis voyez si L'objet se positionne correctement. Si non, jouez avec la rotation et la position de l'enfant du socle. Prennez en note les nouvelles coordonnées et réécrivez les une fois sorti du mode de jeu.
    Pour l'instant, le matériel de votre socle est rose. Pour le modifier, au-dessus de Hover Mesh Material vous pouvez cocher ou décocher si vous ne voulez pas voir le futur placement de l'objet. Vous pouvez aussi assigner un nouveau matériel qui sera celui de votre position proposée.

</checklist>

<h3>Pour assigner un objet spécifique à un socle:</h3>
<checklist>
    Dans votre objet, créez un Interaction Layer Mask pour celui-ci. Assignez-le ensuite dans le paramètre Interaction Layer de la composante XR Grab Interactable. 
    Ensuite, sélectionnez votre socle, puis dans Interaction Layer Mask, sélectionnez uniquement le layer que vous venez de créer. 
    Dans tous vos autres objets sélectionnables, assurez-vous que le nouveau layer mask n'est pas coché, sinon ils pourront interagir avec votre socle. 
</checklist>

<youtube src="VCxaXsLxTs0"></youtube>

                    <!-- ARTICLE FOOTER SOF -->
                </div>
                <tabledesmatieres></tabledesmatieres>
            </article>
            <script>timdocMount();</script>
        <!-- MAIN FOOTER SOF -->
        </main>
        <footer>
            <div id="copyright">2024 Collège Montmorency<br>Techniques d'intégration multimédia</div>
        </footer>
    </body>
</html>