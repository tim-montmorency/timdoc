<!-- 

████████╗██╗███╗   ███╗██████╗  ██████╗  ██████╗
╚══██╔══╝██║████╗ ████║██╔══██╗██╔═══██╗██╔════╝
   ██║   ██║██╔████╔██║██║  ██║██║   ██║██║
   ██║   ██║██║╚██╔╝██║██║  ██║██║   ██║██║
   ██║   ██║██║ ╚═╝ ██║██████╔╝╚██████╔╝╚██████╗
   ╚═╝   ╚═╝╚═╝     ╚═╝╚═════╝  ╚═════╝  ╚═════╝

-->
<!DOCTYPE html>
<html lang="fr-ca">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-P2R7T89B4B"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-P2R7T89B4B');
        </script>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="noindex, nofollow" />
        <meta itemprop="digest" content="">
        <link rel="icon" type="image/x-icon" href="../../../shared/images/favicon.ico">
        <link rel="stylesheet" href="../../../shared/styles/styles.min.css">
        <script src="../../../shared/jscripts/highlight.min.js"></script>
        <script src="../../../shared/jscripts/swiper-bundle.min.js"></script>
        <script src="../../../shared/jscripts/vue.global.prod.js"></script>
        <script src="../../../shared/jscripts/timdoc.min.js"></script>
        <script>const shared = '../../../shared/';</script>
        <title>Déplacement en VR</title>
    </head>
    <body>
        <script>document.body.classList.add(localStorage.getItem('darkmode') === 'true' ? 'dark' : 'light');</script>
        <a id="top"></a>
        <header>
            <div id="logo" @click="goToTop('../../', '')" title="Retour à l'accueil">
                <svg class="logo-tim" xmlns="http://www.w3.org/2000/svg" class="logo-tim" viewBox="0 0 953.6 303.8">
                   <path d="m785.7 166.8 16.3 16.3 16.2-16.3L930.6 54.5v226.2h-257v-226l112 112.1zM650.6.8v303h303V.7h-1.8L802 150.4 652 .7h-1.5zM324.5.4v303h303V.5h-303zm130 129.9a33.5 33.5 0 0 0 34.7 55.3l94.8 94.8H347.5v-257h257v236.4l-94.8-94.7a33.5 33.5 0 0 0-55.3-34.8zM206.4 0 0 206.5V303h303V0h-96.5zM23 280v-64l85.6-85.6 119.9 119.8 20.5-20.5L129.1 110 216 23h64v257H23z"/>
                </svg>
            </div>
            <div title="Interrupteur" id="lightswitch" ref="lightswitch" @click="lightswitch()"></div>
        </header>
        <main>
            <!-- MAIN HEADER EOF -->
            <div id="subhead">
                <div id="breadcrumb">
                    <div id="breadcrumb_normal"><a href="../../">Réalité virtuelle</a> > <a href="../">Unity</a> ></div>
                    <div id="breadcrumb_index"></div>
                </div>
                <h1 id="title"><img src="images/icon.png">&nbsp;Déplacement en VR</h1>
            </div>
            <article>
                <div id="contents">
                    <!-- ARTICLE HEADER EOF -->

<p class="spacer">Nous allons voir différentes méthodes de déplacement en VR dans Unity.</p>


<dots></dots>

<grostitre>Déplacement avec le joystick des manettes</grostitre>
<checklist>
    Appuyez sur le Locomotion System dans la hiérarchie pour l'ouvrir dans l'inspecteur. 
    Décochez la téléportation si vous ne souhaitez pas l'utiliser. 
    Ajouter la composante Continuous Move Provider (Action based) au Locomotion System. 
    Dans le paramètre System, glissez lui-même donc le locomotion System. 
    Pour utiliser une seule main, décochez la boîte Use Reference de la main non voulue. Je recommande de mettre le snap turn sur une main et le continuous move sur l'autre. 
    Appuyez sur le XR Origin dans la hiérarchie pour l'ouvrir dans l'inspecteur. 
    Ajoutez la composante Character controller à cet objet. Ajustez son collider. 
    Ajoutez aussi la composante Character Controller Driver. 
    Dans les paramètres de cette nouvelles composante, glissez votre Locomotion System sur le paramètre Locomotion Provider. 
</checklist>
<p>Le tout en vidéo:</p>
<youtube src="F6ETKU5e_5M"></youtube>
<dots></dots>

<grostitre>Téléportation</grostitre>
<checklist>
    S'assurer que Teleportation Provider est coché dans le Locomotion System et décochez le continuous move provider au besoin. 
    Dans la hiérarchie, clic-droit, XR, ajoutez Teleportation Anchor ou Teleportation Area. Teleportation anchor: On est mieux de créer les zones de téléportation (ex: pastilles) et ensuite de leur ajouter la composante Teleportation anchor. Teleportation area: Zone dans laquelle on peut se téléporter.
    Dans les paramètres de ces composantes, glissez votre XR Interaction Manager dans le paramètre Interaction Manager. 
    Custom reticle = un objet qui apparaît pour montrer que la téléportation est possible. 
    Teleportation provider: Glissez Locomotion System pour qu'on puisse se téléporter. 
</checklist>
<p>Le tout en vidéo:</p>
<youtube src="vx27jJdFB-k"></youtube>

    <dots></dots>

<grostitre>Grimper</grostitre>

<h3>Climb Provider</h3>
<checklist>
    Sur le GameObject Locomotion System, ajouter la composante Climb Provider.
    Glissez le locomotion System dans le paramètre System du Climb Provider. 
</checklist>
<h3>Système d'interaction direct pour les mains</h3>
<checklist>
    Créer un objet vide comme enfant d'une des manettes, le nommer DirectInteractor.
    Ajouter la composante XR Direct Interactor sur cet objet vide. 
    Glissez votre XR Interaction Manager dans le paramètre Interaction Manager de votre composante. 
    Cocher Improve Accuracy With Sphere Collider. 
    Ajouter un Sphere Collider sur l'objet pour représenter votre main. 
    Ajuster le radius du Collider pour qu'il aie la bonne taille.
    Répéter ces étapes pour l'autre main. 
</checklist>
<h3>Créer un mur d'escalade</h3>
<checklist>
    Créer un objet vide nommé Prises. 
    Créez une prise d'escalade dans l'objet Prises. (Assurez-vous que chacune de vos prises est un objet individuel.) 
    Assurez-vous de mettre un sphere collider ou un box collider sur votre prise. 
    Sur le parent des prises, soit l'objet Prises, ajoutez la composante Climb Interactable. 
    Sur le nouveau Rigidbody, décochez use Gravity pour éviter que vos prises tombent au sol. Cochez isKinematic.  
    Dans la composante Climb Interactable, dans le paramètre Interaction Manager, glissez votre XR Interaction Manager. 
    Dans le paramètre Climb Provider, glissez votre Locomotion System.
    Toujours sur l'objet Prises, ajoutez la composante XR Interactable Affordance State Provider. 
    Maintenant, allez dans l'enfant de Prises, soit une prise. Créez un enfant à cette prise. 
    Ajoutez la composante Material Property Block Helper sur ce nouvel objet. 
    Dans le paramètre Renderer, glissez son parent. 
    Ajoutez aussi la composante Color Material Property Affordance Receiver. 
    Dans le paramètre Affordance Theme Datum, appuyez sur la cible et sélectionnez le seul choix possible. 
    Créez un prefab avec votre prise. 
    Glissez ensuite votre prefab dans la scène pour avoir plus d'une prise. 
</checklist>
<h3>Physique du personnage</h3>
<checklist>
    Sur le GameObject XR Origin, ajoutez une composante Character Controller. 
    Ajoutez aussi un Character Controller Driver. 
    Dans son paramètre Locomotion Provider, glissez le Locomotion System. 
</checklist>

<youtube src="Fg1I0DrB8K8"></youtube>



<dots></dots>

<grostitre>Sauter</grostitre>

<p>Voici le tutoriel qui vous montera comment créer le saut en VR:</p>
<youtube src="vvfZbVfikJ8"></youtube>

<br>
<p>Voici le code pour sauter (si le code est nommé jump):</p>
<highlight lang="csharp">using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.InputSystem;

public class jump : MonoBehaviour
{
    [SerializeField] private InputActionProperty jumpButton;
    [SerializeField] private float jumpHeight = 3f;
    [SerializeField] private CharacterController joueur;
    [SerializeField] private LayerMask groundLayer;

    private float gravity = Physics.gravity.y;
    private Vector3 mouvement;

    private void Update()
    {
        bool _isGrounded = isGrounded(); 

        if(jumpButton.action.WasPressedThisFrame()&amp;&amp; _isGrounded)
        {
            Jump();
        }

        mouvement.y += gravity * Time.deltaTime;

        joueur.Move(mouvement * Time.deltaTime);
    }


    private void Jump()
    {
        mouvement.y = Mathf.Sqrt(jumpHeight * -3.0f * gravity); 
    }

    private bool isGrounded()
    {
        return Physics.CheckSphere(transform.position, 0.2f, groundLayer); 
    }
}</highlight>


<dots></dots>

<grostitre>Ascenseur</grostitre>

<p>Voici le tutoriel qui vous aidera à créer une plateforme en mouvement:</p>

<youtube src="eJCu7YEFBu4"></youtube>
                    <!-- ARTICLE FOOTER SOF -->
                </div>
                <tabledesmatieres></tabledesmatieres>
            </article>        <!-- MAIN FOOTER SOF -->
        </main>
        <footer>
            <div id="copyright">2024 Collège Montmorency<br>Techniques d'intégration multimédia</div>
        </footer>
        <script>timdocMount();</script>
    </body>
</html>