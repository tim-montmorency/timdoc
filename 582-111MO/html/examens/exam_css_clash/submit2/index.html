<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Carte de crédit</title>
        <style>
            * { box-sizing: border-box; }

            html {
                height: 100%;
                background-image: linear-gradient(to right, #1d1d1d 0%, rgb(138, 11, 228));
            }

            .form {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                width: 50%;
                background-color: #fff;
                padding: 20px;
                border-radius: 6px;
                min-width: 320px;
                max-width: 600px;
                min-height: 50px;
            }

            .invalid {
                color: #eb001b;
            }
        </style>
    </head>
    <body>

        <div class="form">
            <p id="msg"></p>
            <strong id="exp_label">Nom: </strong> <span id="exp_msg"></span>
            <br>
            <strong id="sec_label">Courriel: </strong> <span id="sec_msg"></span>
            <br>
            <strong id="niv_label">Niveau: </strong> <span id="niv_msg"></span>
            <br>
            <strong id="experience_label">Expérience: </strong> <span id="experience_msg"></span>
            <br>
            <strong id="date_label">Date: </strong> <span id="date_msg"></span>
            <br>
            <strong id="time_label">Heure: </strong> <span id="time_msg"></span>
            <br>
            <h3>Méthode de communication</h3>
            <strong id="discord_label">Discord: </strong> <span id="discord_msg"></span>
            <br>
            <strong id="whatsapp_label">What's App: </strong> <span id="whatsapp_msg"></span>
            <br>
            <h3>Informations supplémentaires :</h3>
            <strong id="contenu_label">Vos commentaires : </strong> <span id="contenu_msg"></span>
            <br>
            <strong id="conditions_label">Conditions acceptées : </strong> <span id="conditions_msg"></span>
            <br>

        </div>

    </body>
</html>

<script>
    
    let errnb = 0;
    const urlParams = new URLSearchParams(window.location.search);


    const nom = urlParams.get('nom');
    if(!nom) {
        document.getElementById('exp_msg').innerText = "Aucun nom n'a été reçu";
        document.getElementById('exp_label').classList.add("invalid");
        errnb++;
    } else {
        document.getElementById('exp_msg').innerText = nom;
        const expRegex = /^[ a-zA-ZàèìòùÀÈÌÒÙáéíóúýÁÉÍÓÚÝâêîôûÂÊÎÔÛãñõÃÑÕäëïöüÿÄËÏÖÜŸçÇßØøÅåÆæœ'`'\-]+$/;
        if(!expRegex.test(nom)){
            document.getElementById('exp_label').classList.add("invalid");
            errnb++;
        }
    }

    const email = urlParams.get('email');
    if(!email) {
        document.getElementById('sec_msg').innerText = "Aucun email n'a été reçu";
        document.getElementById('sec_label').classList.add("invalid");
        errnb++;
    } else {
        document.getElementById('sec_msg').innerText = email;
        const secRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if(!secRegex.test(email)) {
            document.getElementById('sec_label').classList.add("invalid");
            errnb++;
        }
    }


    const niveau = urlParams.get('niveau');
    if(!niveau) {
        document.getElementById('niveau_msg').innerText = "Aucun niveau n'a été reçu";
        document.getElementById('niveau_label').classList.add("invalid");
        errnb++;
    } else {
        document.getElementById('niveau_msg').innerText = niveau;
    }


    const experience = urlParams.get('experience');
    if(!experience) {
        document.getElementById('experience_msg').innerText = "Aucune expérience n'a été reçu";
        document.getElementById('experience_label').classList.add("invalid");
        errnb++;
    } else {
        document.getElementById('experience_msg').innerText = experience;
    }

    const date = urlParams.get('date');
    if(!date) {
        document.getElementById('date_msg').innerText = "Aucune date n'a été reçu";
        document.getElementById('date_label').classList.add("invalid");
        errnb++;
    } else {
        document.getElementById('date_msg').innerText = date;
        const dateRegex = /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/;
        if(!dateRegex.test(date)){
            document.getElementById('date_label').classList.add("invalid");
            errnb++;
        }
    }

    const time = urlParams.get('time');
    if(!time) {
        document.getElementById('time_msg').innerText = "Aucune heure n'a été reçu";
        document.getElementById('time_label').classList.add("invalid");
        errnb++;
    } else {
        document.getElementById('dtime_msg').innerText = time;
        const timeRegex = /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/;
        if(!timeRegex.test(time)){
            document.getElementById('time_label').classList.add("invalid");
            errnb++;
        }
    }

    const discord = urlParams.get('discord');
    if(!discord) {
        document.getElementById('discord_msg').innerText = "Aucun choix n'a été reçu";
        document.getElementById('discord_label').classList.add("invalid");
        errnb++;
    } else {
        document.getElementById('discord_msg').innerText = discord;
    }
    
    const whatsapp = urlParams.get('whatsapp');
    if(!whatsapp.checked) {
        document.getElementById('discord_msg').innerText = discord;
    } else {
        document.getElementById('whatsapp_msg').innerText = "Aucun choix n'a été reçu";
        document.getElementById('whatsapp_label').classList.add("invalid");
        errnb++;
    }
    

    const contenu = urlParams.get('contenu');
    if(!contenu) {
        document.getElementById('contenu_msg').innerText = "Aucun texte n'a été reçu";
        document.getElementById('contenu_label').classList.add("invalid");
        errnb++;
    } else {
        document.getElementById('contenu_msg').innerText = contenu;
    }


    const conditions = urlParams.get('conditions');
    if(!conditions) {
        document.getElementById('conditions_msg').innerText = "Aucune condition n'a été reçu";
        document.getElementById('conditions_label').classList.add("invalid");
        errnb++;
    } else {
        document.getElementById('conditions_msg').innerText = conditions;
    }

    if(errnb) {
        document.getElementById('msg').innerText = "❌ Désolé, certaines informations sont invalides.";
    } else {
        document.getElementById('msg').innerText = "✅ Merci vos informations ont bien été reçues.";
    }

</script>