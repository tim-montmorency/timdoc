<!DOCTYPE html>
<html lang="fr-ca">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-P2R7T89B4B"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-P2R7T89B4B');
        </script>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="noindex, nofollow" />
        <link rel="icon" type="image/x-icon" href="../../../shared/images/favicon.ico">
        <link rel="stylesheet" href="../../../shared/styles/styles.min.css">
        <link rel="stylesheet" href="../../../shared/styles/highlight.min.css">
        <link rel="stylesheet" href="../../../shared/styles/swiper-bundle.min.css">
        <script src="../../../shared/jscripts/highlight.min.js"></script>
        <script src="../../../shared/jscripts/howler.min.js"></script>
        <script src="../../../shared/jscripts/swiper-bundle.min.js"></script>
        <script src="../../../shared/jscripts/vue.global.prod.js"></script>
        <script src="../../../shared/jscripts/timdoc.min.js"></script>
        <script>const shared = '../../../shared/';</script>
        <title>Posts personnalisés</title>
    </head>
    <body>
        <script>document.body.className = localStorage.getItem('darkmode') === 'true' ? 'dark' : 'light';</script>
        <a id="top"></a>
        <header>
            <div id="logo" @click="goToTop('../../', '')" title="Retour à l'accueil">
                <svg class="logo-tim" xmlns="http://www.w3.org/2000/svg" class="logo-tim" viewBox="0 0 953.6 303.8">
                   <path d="m785.7 166.8 16.3 16.3 16.2-16.3L930.6 54.5v226.2h-257v-226l112 112.1zM650.6.8v303h303V.7h-1.8L802 150.4 652 .7h-1.5zM324.5.4v303h303V.5h-303zm130 129.9a33.5 33.5 0 0 0 34.7 55.3l94.8 94.8H347.5v-257h257v236.4l-94.8-94.7a33.5 33.5 0 0 0-55.3-34.8zM206.4 0 0 206.5V303h303V0h-96.5zM23 280v-64l85.6-85.6 119.9 119.8 20.5-20.5L129.1 110 216 23h64v257H23z"/>
                </svg>
            </div>
            <div title="Interrupteur" id="lightswitch" class="lightswitch--on" ref="lightswitch" @click="lightswitch()"></div>
        </header>
        <main>
            <!-- MAIN HEADER EOF -->
            <div id="subhead">
                <div id="breadcrumb">
                    <div id="breadcrumb_normal"><a href="../../">Projet Web</a> > <a href="../">WordPress</a> ></div>
                    <div id="breadcrumb_index"></div>
                </div>
                <h1 id="title"><img src="images/icon-wp.png">&nbsp;Posts personnalisés</h1>
            </div>
            <article>
                <div id="contents">
                    <!-- ARTICLE HEADER EOF -->

<p>Par défaut, WordPress offre différentes&nbsp;collections:</p>


<ul>
    <li style="margin:0">Articles</li>
    <li style="margin:0">Médias</li>
    <li style="margin:0">Pages</li>
    <li style="margin:0">Commentaires.</li>
</ul>



<p>Bien que pratiques, il est parfois souhaitable d'en créer des&nbsp;nouvelles.</p>
<br><br>

<grostitre>Déclaration manuelle</grostitre>
<p>La déclaration d'un nouveau type de posts doit se fait via le fichier&nbsp;<span class="inline-code">functions.php</span>.</p>

<p>Par exemple:</p>

<highlight lang="php">function create_post_type() {
  register_post_type(&#039;produits&#039;, 
    array(
      &#039;labels&#039; =&gt; array(
        &#039;name&#039; =&gt; _x(&#039;Produits&#039;, &#039;Nom g&eacute;n&eacute;rique&#039;),
        &#039;singular_name&#039; =&gt; _x(&#039;Produit&#039;, &#039;Au singulier&#039;),
        &#039;menu_name&#039; =&gt; __(&#039;Produits&#039;),
        &#039;all_items&#039; =&gt; __(&#039;Tous les produits&#039;),
        &#039;view_item&#039; =&gt; __(&#039;Voir les produits&#039;),
        &#039;add_new_item&#039; =&gt; __(&#039;Ajouter un nouveau produit&#039;),
        &#039;add_new&#039; =&gt; __(&#039;Ajouter&#039;),
        &#039;edit_item&#039; =&gt; __(&#039;Editer le produit&#039;),
        &#039;update_item&#039; =&gt; __(&#039;Modifier le produit&#039;),
        &#039;search_items&#039; =&gt; __(&#039;Rechercher un produit&#039;),
        &#039;not_found&#039; =&gt; __(&#039;Non trouv&eacute;&#039;),
        &#039;not_found_in_trash&#039; =&gt; __(&#039;Non trouv&eacute; dans la corbeille&#039;),
      ),
      &#039;supports&#039; =&gt; array(
        &#039;title&#039;, 
        &#039;editor&#039;, 
        &#039;author&#039;, 
        &#039;thumbnail&#039;, 
        &#039;custom-fields&#039;,
      ),
      &#039;show_in_rest&#039; =&gt; true,
      &#039;public&#039; =&gt; true,
      &#039;has_archive&#039; =&gt; true,
    )
  );
}

add_action(&#039;init&#039;, &#039;create_post_type&#039;);</highlight>

<br><br>



<p>Dans cet exemple, avec&nbsp;<span class="inline-code">&#039;labels&#039; =&gt; array( ... )</span>&nbsp;indique à WordPress comment nommer ce nouveau post dans différents&nbsp;scénarios.</p><p><span class="inline-code">&#039;supports&#039; =&gt; array( ... )</span>&nbsp;indique les champs disponibles pour ce type de post dans le tableau de&nbsp;bord.</p>

<p>Tandis que&nbsp;<span class="inline-code">addaction(&#039;init&#039;, &#039;createpost_type&#039;);</span>&nbsp;indique à WordPress d'appeler cette fonction créant le nouveau type de post à son&nbsp;instanciation.</p><p>Dès ce moment, la nouvelle collection devrait être disponible dans le tableau de&nbsp;bord.</p>





<dots></dots>
<grostitre>Utilisation manuelle (affichage du contenu)</grostitre>
<p>Pour afficher cette collection, il faudra faire une requête à WordPress et stocker son résultat dans une&nbsp;variable.</p>

<p>Par&nbsp;exemple:</p>

<highlight lang="php">$products = new WP_Query(&#039;post_type=produits&#039;);</highlight>


<p>Ensuite, il faudra boucler parmi les résultats&nbsp;obtenus et imprimer <span class="inline-code">print</span> ceux-ci dans une page:</p>

<highlight lang="php">while ( $products-&gt;have_posts() ) : $products-&gt;the_post(); 
    print the_title();  // titre du produit
    the_excerpt(); // extrait de la description du produit
endwhile;</highlight>

<!--<highlight lang="php">while ($produits-&gt;have_posts()) : $produits-&gt;the_post();</highlight>-->


<p>Les fonctions de base, tel que:&nbsp;<span class="inline-code">the_title()</span>&nbsp;ou&nbsp;<span class="inline-code">the_content()</span>&nbsp;retourneront dans le contexte de cette boucle les informations associées à notre collection de&nbsp;produits.</p>

<doclink href='https://developer.wordpress.org/reference/functions/register_post_type/'>register_post_type</doclink>







<dots></dots>
<grostitre>Custom Post Type UI</grostitre>
<p>Est une extension WordPress facilitant grandement la création de nouveaux types de&nbsp;posts. Dans l'onglet extensions&nbsp;<em>(plugins)</em>&nbsp;du tableau de bord, recherchez&nbsp;<em>Custom Post Type UI</em>&nbsp;et repérez l'extension créée par&nbsp;WebDevStudios.</p>


<p>Installez et activez&nbsp;là.</p>
<img src="images/custom-post-type-ui.jpg" alt="Extension Custom Post Type UI">


<p></p>
<h3 class="heading heading--h3" id="nouveaux-types-posts">Création de nouveaux types de posts</h3>
<p>Une fois l'extension installée, un onglet&nbsp;<em>CPT UI</em>&nbsp;devrait être visible dans la barre latérale servant de&nbsp;menu.</p>
<p>À partir de cet onglet, il est possible de créer de nouveaux Types de posts en cliquant sur&nbsp;<em>(Add/Edit Post&nbsp;Type)</em>.</p>

<p>Remplissez les trois champs de&nbsp;base:</p>

<ol start="1">
    <li style="margin:0"><em>Slug</em>&nbsp;nom pour accéder au post dans le&nbsp;code</li>
    <li style="margin:0"><em>Plural Label</em>&nbsp;nom au pluriel des&nbsp;posts</li>
    <li style="margin:0"><em>Singular Label</em>&nbsp;nom au singulier des&nbsp;posts</li>
</ol>

<p>Optionnellement, vous pouvez remplir les différents champs affichés après les trois premiers pour plus de contrôle sur l'affichage de votre nouveau type de&nbsp;post.</p>


<info>Une des options les plus populaires est de changer l’icône du nouveau type de post. Pour ce faire, il faut aller presque à la fin des champs supplémentaire et populer un champ nommé Menu&nbsp;Icon.</info>

<p>Cliquez sur&nbsp;<em>Populate missing labels based on chosen labels</em>&nbsp;et appuyez sur&nbsp;<em>Add Post&nbsp;Type</em>.</p>

<p>Un nouveau type de post devrait automatiquement apparaître dans le menu latéral du tableau de bord de&nbsp;WordPress.</p>







<dots></dots>
<grostitre>Affichage dans les menus</grostitre>
<p>Il est possible d'ajouter les nouveaux types de posts dans un menu personnalisé. Cependant, cette option est désactivée par&nbsp;défaut.</p>
<p>Pour&nbsp;l'activer:</p>

<ol start="1">
    <li><p>Allez dans&nbsp;<span class="inline-code">Apparence -&gt; Menus</span>.</p></li>
    <li><p>En haut à droite de la page, repérez le bouton&nbsp;<em>Options de l'écran</em>&nbsp;et cliquez&nbsp;dessus.</p></li>
    <li><p>Dans le panneau ouvrant, cochez les types de posts ayant la permission d'être inclus dans les&nbsp;menus.</p></li>
</ol>





<dots></dots>
<grostitre>Création de modèles</grostitre>
<p>Afin de pouvoir sélectionner un modèle&nbsp;<em>(template)</em>&nbsp;pour un type de post personnalisé, il est nécessaire de spécifier un modèle&nbsp;compatible.</p>

<p>Pour ce faire, dans le fichier PHP d'un modèle, il faut ajouter dans les commentaires de début de page une propriété intitulée&nbsp;<span class="inline-code">Template Post Type</span>&nbsp;et lui spécifier les types de posts&nbsp;compatibles.</p>
<p>Par exemple, pour qu'un modèle soit compatible avec les posts de base et les posts personnalisés de type&nbsp;<em>partenaire</em>, il faut&nbsp;écrire:</p>
<highlight lang="css">/**
 * Template Name: Partenaire
 * Template Post Type: post, page, partenaire
 */</highlight>




 <dots></dots>
 <grostitre>Export</grostitre>
<p>Custom Post Type UI permet d'exporter la structure de ses posts personnalisés afin de pouvoir les importer sur un autre site.</p>

<h3 class="heading heading--h3" id="Exportation">Exportation</h3>
<p>Il faut aller dans l'onglet&nbsp;<span class="inline-code">CPT UI</span>&nbsp;et sélectionner l'option&nbsp;<span class="inline-code">Tools</span>. À cet endroit dans la colonne de droite, une boite de texte permet de copier un code JSON contenant la structure des posts personnalisés. </p>

<warning>Attention, cette exportation <strong>n’inclut pas les valeurs</strong>, uniquement la structure des&nbsp;posts.</warning>



<h3 class="heading heading--h3" id="Importation">Importation</h3>
<p>Pour importer des posts personnalisés, il faut aussi aller dans l'onglet&nbsp;<span class="inline-code">CPT UI</span>&nbsp;et sélectionner l'option&nbsp;<span class="inline-code">Tools</span>. Sur cette page, dans la colonne de gauche, se trouve une boite de texte vide permettant de copier un code JSON. Importez le code désiré permet de recréer la structure des posts personnalisés d'un projet à un autre.</p>

<warning>Assurez-vous que l’extension Custom Post Type UI soit installée sur le nouveau site avant d’importer une structure de posts&nbsp;personnalisés.</warning>

<doclink href='https://fr.wordpress.org/plugins/custom-post-type-ui/'>Custom Post Type UI</doclink>

                    <!-- ARTICLE FOOTER SOF -->
                </div>
                <tabledesmatieres></tabledesmatieres>
            </article>
            <script>timdocMount();</script>
        <!-- MAIN FOOTER SOF -->
        </main>
        <footer>
            <div id="copyright">2024 Collège Montmorency<br>Techniques d'intégration multimédia</div>
        </footer>
    </body>
</html>