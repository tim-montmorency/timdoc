<!-- 

‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ïó   ‚ñà‚ñà‚ñà‚ïó‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó
‚ïö‚ïê‚ïê‚ñà‚ñà‚ïî‚ïê‚ïê‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ïó ‚ñà‚ñà‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ñà‚ñà‚ïó‚ñà‚ñà‚ïî‚ïê‚ïê‚ïê‚ïê‚ïù
   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïî‚ñà‚ñà‚ñà‚ñà‚ïî‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë
   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë‚ïö‚ñà‚ñà‚ïî‚ïù‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë  ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë
   ‚ñà‚ñà‚ïë   ‚ñà‚ñà‚ïë‚ñà‚ñà‚ïë ‚ïö‚ïê‚ïù ‚ñà‚ñà‚ïë‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïî‚ïù‚ïö‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ïó
   ‚ïö‚ïê‚ïù   ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïù     ‚ïö‚ïê‚ïù‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù

-->
<!DOCTYPE html>
<html lang="fr-ca">
    <head>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-P2R7T89B4B"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-P2R7T89B4B');
        </script>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="robots" content="noindex, nofollow" />
        <meta itemprop="digest" content="">
        <link rel="icon" type="image/x-icon" href="../../../shared/images/favicon.ico">
        <link rel="stylesheet" href="../../../shared/styles/styles.min.css">
        <script src="../../../shared/jscripts/highlight.min.js"></script>
        <script src="../../../shared/jscripts/swiper-bundle.min.js"></script>
        <script src="../../../shared/jscripts/vue.global.prod.js"></script>
        <script src="../../../shared/jscripts/timdoc.min.js"></script>
        <script>const shared = '../../../shared/';</script>
        <title>REST API</title>
    </head>
    <body>
        <script>document.body.classList.add(localStorage.getItem('darkmode') === 'true' ? 'dark' : 'light');</script>
        <a id="top"></a>
        <header>
            <div id="logo" @click="goToTop('../../', '../../../index/')" title="Retour √† l'accueil">
                <svg class="logo-tim" viewBox="0 0 953.6 303.8">
                   <path d="m785.7 166.8 16.3 16.3 16.2-16.3L930.6 54.5v226.2h-257v-226l112 112.1zM650.6.8v303h303V.7h-1.8L802 150.4 652 .7h-1.5zM324.5.4v303h303V.5h-303zm130 129.9a33.5 33.5 0 0 0 34.7 55.3l94.8 94.8H347.5v-257h257v236.4l-94.8-94.7a33.5 33.5 0 0 0-55.3-34.8zM206.4 0 0 206.5V303h303V0h-96.5zM23 280v-64l85.6-85.6 119.9 119.8 20.5-20.5L129.1 110 216 23h64v257H23z"/>
                </svg>
            </div>
            <div title="Interrupteur" id="lightswitch" ref="lightswitch" @click="lightswitch()"></div>
        </header>
        <main>
            <!-- MAIN HEADER EOF -->
            <div id="subhead">
                <div id="breadcrumb">
                    <div id="breadcrumb_normal"><a href="../../">Projet Web</a> > <a href="../">WordPress</a> ></div>
                    <div id="breadcrumb_index"><a href="../../../index/">Index des connaissances</a>&nbsp;>&nbsp;<a href="../../../index/web/">Web</a>&nbsp;>&nbsp;<a href="../../../index/web/wordpress/">WordPress</a>&nbsp;>&nbsp;</div>
                </div>
                <h1 id="title"><img src="../medias/icon.webp">&nbsp;REST API</h1>
            </div>
            <article>
                <div id="contents">
                    <!-- ARTICLE HEADER EOF -->

<p>Le Rest API de WordPress est la fonctionnalit√© pr√©f√©r√©e des d√©veloppeurs WordPress n'affectionnant pas particuli√®rement&nbsp;WordPress‚Äâüñ§.</p>

<p>Elle permet aux √©diteurs de continuer d'entrer/modifier du contenu dans le tableau de bord de WordPress, comme dans tout site WordPress classique. Tout en permettant aux d√©veloppeurs d'acc√©der aux contenus en JavaScript via des JSON plut√¥t que d'avoir √† utiliser les templates PHP de&nbsp;WordPress.</p>


<dots></dots>
<grostitre>Utilisation de base</grostitre>
      
<p>Par d√©faut, le Rest API est d√©j√† pr√©sent sur tout site WordPress. Pour y avoir acc√®s, il suffit d'ajouter&nbsp;<span class="inline-code">/wp-json/wp/v2/</span>&nbsp;√† la fin de l'url du site en&nbsp;question.</p>

<p>Par exemple:</p>

<highlight lang="console">https://site.com/wp-json/wp/v2/</highlight>

<br>
<p>La page retourn√©e ressemble probablement √† un mur de texte illisible. Il s'agit en fait d'un fichier JSON minifi√© contenant tous les contenus du site, affich√©s sur une seule&nbsp;ligne.</p>


<alert><strong>Erreur fr√©quente</strong><br>Si le Rest API de votre site ne r√©pond pas √† cette URL, il est probable que votre h√©bergeur ait modifi√© son emplacement. Pour le trouver, ouvrez le code source de votre page d‚Äôaccueil et cherchez&nbsp;<em>"wp-json/"</em>. <br><br>

Avec une nouvelle installation WordPress, il est possible qu'il soit situ√© √† cette adresse: <span class='inline-code'>https://site.com/index.php/wp-json/wp/v2/</span> </alert>
<br><br>

<dots></dots>
<grostitre>Visualiser les donn√©es re√ßues</grostitre>
<h3>√Ä l'aide d'une extention √† ajouter √† votrwe navigateur web pr√©f√©r√©</h3>
        <a class="tool" target="_blank" href="https://jsonview.com/">
            <div class="tool-container">
                <div class="tool-abstract">
                    <em class="tool-label">OUTIL</em>
                    <span class="tool-title">JSONView</span>
                    <span class="tool-description">Permet d‚Äôafficher un fichier JSON en format standard dans un navigateur plut√¥t qu‚Äôen une longue chaine de caract√®res.</span>
                </div>
                <div class="tool-thumb" style="background-image: url(../../tools/jsonview/images/thumb.webp)"></div>
            </div>
        </a>
<h3>Avec Firefox</h3>
<p>Avec Firefox, vous n'avez pas besoin d'extention suppl√©mentaire pour visualiser le JSON de mani√®re propre et ordonn√©e. </p>
<clipasset src='images/firefox-json.mp4'></clipasset>


 <dots></dots>
 <grostitre>Routes</grostitre>

<p>Pour des raisons de performance et de facilit√© de traitement, il est g√©n√©ralement pr√©f√©rable de ne charger que les informations qui seront utilis√©es. Pour ce faire, il est possible d'utiliser ce que l'on appelle des&nbsp;routes.</p>


<h3>Pages (pages)</h3>
<p>Par exemple, si seulement les pages sont requises, il est possible de sp√©cifier la&nbsp;route</p>

<highlight lang="console">https://site.com/wp-json/wp/v2/pages</highlight>

<br>

<p>Qui retournera un JSON ne contenant que les pages&nbsp;publi√©es.</p>

<p>Dans cet exemple, la partie&nbsp;<span class="inline-code">https://site.com/wp-json/wp/v2</span>&nbsp;correspond √† l'URL de base de l'API. Tandis que&nbsp;<span class="inline-code">/pages</span>&nbsp;est la route sp√©cifiant que seuls les contenus de type&nbsp;<em>page</em>&nbsp;doivent-√™tre&nbsp;retourn√©.</p>

<dots></dots>
<h3>Articles (posts)</h3>
<p>Si un autre type de publication doit √™tre retourn√©. Par exemple, les articles, ou en anglais&nbsp;<em>posts</em>, il suffit de sp√©cifier une route&nbsp;diff√©rente.</p>

<p>Dans cet exemple:&nbsp;<span class="inline-code">/posts</span>.</p>

<highlight lang="console">https://site.com/wp-json/wp/v2/posts</highlight>


<dots></dots>
<h3>Type de publication personnalis√© (custom post type)</h3>
<p>Si un autre type de publication (custom post type) doit √™tre retourn√©. Par exemple, les jeux comme dans l'exercice "Valet de coeur", il suffit de sp√©cifier une route&nbsp;diff√©rente.</p>

<p>Dans cet exemple:&nbsp;<span class="inline-code">/games</span>.</p>

<highlight lang="console">https://site.com/wp-json/wp/v2/games</highlight>


<dots></dots>
<h3>Et si on pr√©cisait la route vers une page sp√©cifique?</h3>
<p>Il est possible de sp√©cifier des routes encore plus pr√©cises. Notamment en sp√©cifiant l'ID de la publication&nbsp;d√©sir√©e.</p>

<p>Par exemple, si seulement la page avec le ID 10 est requis, il est possible de sp√©cifier la route&nbsp;<span class="inline-code">/pages/10</span>.</p>

<highlight lang="console">https://site.com/wp-json/wp/v2/pages/10</highlight>

<doclink href='https://developer.wordpress.org/rest-api/reference/'>Reference REST API</doclink>
<doclink href='https://capitainewp.io/formations/developper-theme-wordpress/api-rest/'>REST API expliqu√© par capitaine WP</doclink>





<dots></dots>
<grostitre>Tri des r√©sultats</grostitre>


<h3 class="heading heading--h3" id="orderby">orderby</h3>

<p>Pour trier les r√©sultats d‚Äôune requ√™te, il faut ajouter des param√®tres √† l‚ÄôURL fournie √† la requ√™te fetch. Un premier <span class="inline-code">orderby</span> permet d'indiquer le crit√®re devant √™tre utilis√© afin de trier les r√©sultats. Il est entre autres possible de trier par:</p>

<ul>
    <li><p>Titre <span class="inline-code">title</span></p></li>
    <li><p>Identifiant <span class="inline-code">id</span></p></li>
    <li><p>Date de publication <span class="inline-code">date</span></p></li>
    <li><p>Etc.</p></li>
</ul>
    
<p>Par exemple, par titres:</p>

<highlight lang="console">https://site.com/wp-json/wp/v2/posts?orderby=title</highlight>


<h3 class="heading heading--h3" id="order">order</h3>

<p>Il est aussi de sp√©cifier l‚Äôordre dans lequel les posts devraient √™tre tri√©s via le param√®tre <span class="inline-code">order</span>permettant de sp√©cifier si les r√©sultats doivent √™tre tri√©s par:</p>
<ul>
    <li><p>ordre croissant asc </p></li>
    <li><p>ordre d√©croissant desc</p></li>
</ul>


<p>Par exemple, par titres d√©croissants:</p>


<highlight lang="console">https://site.com/wp-json/wp/v2/posts?orderby=title&amp;order=desc</highlight>


<br>
<doclink href="https://developer.wordpress.org/rest-api/reference/posts/#arguments">Arguments</doclink>


<info>Le premier param√®tre est s√©par√© de l‚ÄôURL gr√¢ce √† un point d‚Äôinterrogation <em>(?)</em>. Tous les param√®tres suivants sont s√©par√©s entre eux par une perlu√®te&nbsp;<em>(&amp;)</em>.</info>






<dots></dots>
<grostitre>Featured Image</grostitre>

<p>Par d√©faut, un objet correspondant √† un post dans le JSON ne contient que le id du featured image lui √©tant associ√©. Pour obtenir plus d‚Äôinformations concernant ce featured image, il faut le sp√©cifier dans l‚ÄôURL fournie √† fetch en lui ajoutant le param√®tre <span class="inline-code">_embed</span>. </p>


<p>Par exemple: </p>

<highlight lang="console">https://site.com/wp-json/wp/v2/posts?_embed</highlight>


<br><br>

<p>Chaque post sera alors bonifi√© d‚Äôune propri√©t√© nomm√©e <span class="inline-code">_embedded</span> contenant une sous-propri√©t√© intitul√©e <span class="inline-code">wp:featuredmedia</span>. Celle-ci est un tableau contenant des objets correspondant √† chaque featured image associ√©e au post. </p>


<info>Certaines extensions permettent d‚Äôajouter plus d‚Äôune featured image, d‚Äôo√π pourquoi un tableau est&nbsp;retourn√©.</info>

<p>Il est donc possible d‚Äôacc√©der √† toutes les propri√©t√©s associ√©es √† cette image telles que: sa date de cr√©ation, son alt et surtout son URL. </p>

<p>Par exemple, afin d‚Äôobtenir l‚ÄôURL de la 1<sup>re</sup> featured image:</p>

<highlight lang="javascript">referencAuPost._embedded[&#039;wp:featuredmedia&#039;][0].source_url</highlight>

<br><br>
<doclink href="https://developer.wordpress.org/rest-api/using-the-rest-api/global-parameters/#_embed">_embed</doclink>





<dots></dots>
<grostitre>Compatibilit√© SCF</grostitre>
<p>Les <em>post types</em> que vous cr√©ez avec SCF vont √™tre pris en compte et retourn√©s par le REST&nbsp;API.</p>

<p>Par compte, les informations stock√©es dans des champs&nbsp;<a target="_blank" rel="noopener noreferrer" href="/cours/wordpress/advanced-custom-fields">SCF</a>&nbsp;ne sont pas retourn√©es par le Rest&nbsp;API de WordPress. Heureusement, il est possible de les inclure facilement en activant REST API pour le/les groupe(s) de champs concern√©s. </p>

<clipasset src='images/show-in-rest-api.mov'></clipasset>





<dots></dots>
<grostitre>Affichage</grostitre>
<p>Une fois les JSONs d√©sir√©s identifi√©s, il ne reste plus qu'√† afficher leurs&nbsp;informations!</p>
<p>Par exemple, dans la page&nbsp;<em>single.php</em>&nbsp;servant √† afficher les articles, il serait possible de d√©clarer une balise&nbsp;<span class="inline-code">&lt;script&gt;</span>&nbsp;et d'effectuer un&nbsp;<a target="_blank" rel="noopener noreferrer" href="../../../582-424MO/javascript/fetch-api/">fetch</a>&nbsp;afin de r√©cup√©rer les informations de l'article&nbsp;courant:</p>



<highlight lang="javascript">fetch(&quot;/wp-json/wp/v2/posts/&lt;?php the_ID(); ?&gt;&quot;)
  .then(response =&gt; response.json())
  .then(data =&gt; console.log(data));</highlight>

<info><span class="inline-code">the_ID()</span> est une fonction de WordPress retournant le id de la page courante, ex:&nbsp;10.</info>




<dots></dots>
<grostitre>Pour creuser dans un JSON</grostitre>
<p>Si vous ne vous souvenez pas comment creuser dans un JSON et aller chercher l'info qu'on veut afficher dans la page, retournez voir les contenus de cours de Fetch API. Je vous remonte aussi un CodePen que vous avez d√©j√† vu dans un cours ant√©rieur qui continent des explications (voir les commentaires dans le JS).</p>
        <div class="intlink__item">
            <div class="intlink__item__icon" style="background-image: url(../../../582-424MO/javascript/fetch-api/images/ico-fetch.png);"></div>
            <div class="intlink__item__description">
                <span class="intlink__item__title"><a target="_blank" href="../../../582-424MO/javascript/fetch-api/">Fetch API</a></span>
                <span class="intlink__item__abstract">L'API Fetch: interface pour r√©cup√©ration de ressources √† travers le r√©seau</span>
            </div>
        </div>

<p class="codepen" data-height="600" data-theme-id="44431" data-default-tab="js,result" data-slug-hash="OJrYEop" data-pen-title="DEMO Fetch API | GET - Reddit" data-user="tim-momo" style="height: 600px; box-sizing: border-box; display: flex; align-items: center; justify-content: center; border: 2px solid; margin: 1em 0; padding: 1em;">
  <span>See the Pen <a href="https://codepen.io/tim-momo/pen/OJrYEop">
  DEMO Fetch API | GET - Reddit</a> by TIM Montmorency (<a href="https://codepen.io/tim-momo">@tim-momo</a>)
  on <a href="https://codepen.io">CodePen</a>.</span>
</p>
<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>


<br><br>
        <a class="exercice" target="_blank" href="../../exercices/wp-rest-api-vice-versa/">
            <div class="exercice-container">
                <div class="exercice-thumb" style="background-image: url(../../exercices/wp-rest-api-vice-versa/images/thumb.webp)"></div>
                <div class="exercice-abstract">
                    <em class="exercice-label">EXERCICE</em>
                    <span class="exercice-title">WP Rest API - Vice Versa</span>
                    <span class="exercice-description">Cr√©er un microsite permettant de pr√©senter les protagonistes du film Vice Versa</span>
                </div>
            </div>
        </a>



<br> <br>
<doclink href="https://developer.wordpress.org/rest-api/using-the-rest-api/global-parameters/">REST API</doclink>

                    <!-- ARTICLE FOOTER SOF -->
                </div>
                <tabledesmatieres></tabledesmatieres>
            </article>        <!-- MAIN FOOTER SOF -->
        </main>
        <footer>
           
            <div id="copyright"> 
            Ce contenu a √©t√© tir√© en grande partie du site web de <a href="https://smnarnold.com/" target="_blank" rel="noopener noreferrer">Simon Arnold</a>.<br>
            Coll√®ge Montmorency | Techniques d'int√©gration multim√©dia
            </div>
        </footer>
        <script>app.mount('body');</script>
    </body>
</html>